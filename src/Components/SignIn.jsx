import React, { useState } from "react";
import { auth } from "../../firebase";
import { View, Text, TextInput, Button, StatusBar } from 'react-native';
import { Link } from 'react-router-native';

/*
import * as GoogleAuthentication from 'expo-google-app-auth';
import firebase from 'firebase';

*/

const SignIn = () => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');


  //Esta funcion es para comprobar la existencia de una cuenta en la BD de firebase.
  const signInWithEmailAndPasswordHandler = (email, password) => {
    console.log("hola");
    auth.signInWithEmailAndPassword(email, password).catch(error => {
      console.log("Error signing in with password and email", error);
    });
    console.log("despues");
  };


  /*
    const signInWithGoogle = () =>
      GoogleAuthentication.logInAsync({
        webClientId="349581276888-sit3tiuali8dnboomm6cqlcalem9h039.apps.googleusercontent.com",
        offlineAccess: true
      })
        .then((logInResult) => {
          if (logInResult.type === 'success') {
            const { idToken, accessToken } = logInResult;
            const credential = firebase.auth.GoogleAuthProvider.credential(
              idToken,
              accessToken
            );
  
            return firebase.auth().signInWithCredential(credential);
            // Successful sign in is handled by firebase.auth().onAuthStateChanged
          }
          return Promise.reject(); // Or handle user cancelation separatedly
        })
        .catch((error) => {
          // ...
        });
  */
  const prueba = () =>{
    alert(email + password);
  }

  return (
    <View>
      <StatusBar/>
      <Text h1>BIENVENIDOS AL SISTEMA</Text>
      <TextInput value={email} onChangeText={email => setEmail(email)} placeholder="Ingrese su correo"></TextInput>
      <TextInput value={password} onChangeText={password => setPassword(password)} placeholder="Ingrese su contraseÃ±a" ></TextInput>

      <Button title="Iniciar Sesion" onPress={()=>{signInWithEmailAndPasswordHandler(email, password)}}/>

      <Button title="Google" onPress = {prueba}/>

      <Link to="/" >
        <Text>Registrarme</Text>
      </Link>

    </View>
  );
  }

  export default SignIn;

























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































